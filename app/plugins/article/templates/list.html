{% import "_macros.html" as macros %}
<table class="table">
    <thead>
    <tr>
        <th>标题</th>
        <th>作者</th>
        <th>时间</th>
        <th>分类</th>
        <th>标签</th>
        <th>操作</th>
    </tr>
    </thead>
    <tbody>
    {% for article in articles %}
        <tr>
            <td>{{ article.title }}</td>
            <td>{{ article.author.name }}</td>
            <td>{{ moment(article.timestamp).format('L') }}</td>
            <td>
                {% for category in article.categories %}
                    {% set category_info=category.get_info() %}
                    <a href="{{ category_info['url'] }}">{{ category_info['name'] }}</a>
                    {% if not loop.last %}
                        ,
                    {% endif %}
                {% endfor %}
            </td>
            <td>
                {% for tag in article.tags %}
                    {% set tag_info=tag.get_info() %}
                    <a href="{{ tag_info['url'] }}">{{ tag_info['name'] }}</a>
                    {% if not loop.last %}
                        ,
                    {% endif %}
                {% endfor %}
            </td>
            <td>
                <button type="button" class="btn btn-danger article-item" data-id="{{ article.id }}">删除</button>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% if pagination %}
    <div class="text-center">
        {{ macros.pagination_widget_2(pagination['pagination'],pagination['url_for'], pagination['endpoint'] , **pagination['fragment']) }}
    </div>
{% endif %}