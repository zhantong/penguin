{% extends 'utils/card.html' %}

{% block slug -%}
    template
{%- endblock %}

{% block title %}
    模板
{% endblock %}

{% block body %}
<div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" id="dropdown-template" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="true" data-id="">
        {{ template.name }}
        <span class="caret"></span>
    </button>
    <input type="hidden" name="template-id" id="dropdown-template-input" value="">
    <ul class="dropdown-menu" aria-labelledby="dropdown-template">
        <li><a href="#" data-id="">不使用模板</a></li>
        {% for template in all_templates %}
            <li><a href="#" data-id="{{ template.id }}">{{ template.name }}</a></li>
        {% endfor %}
    </ul>
</div>
{% endblock %}

{% block script %}
<script>
    $('#dropdown-template ~ ul li > a').click(function (e) {
        $('#dropdown-template-input').val($(this).data('id'));
        $('#dropdown-template').html($(this).text() + ' <span class="caret"></span>')
    });
</script>
{% endblock %}